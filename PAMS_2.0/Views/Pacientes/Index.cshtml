@model PAMS_2._0.Data.ViewModel;

@{ ViewData["Title"] = "Lista de Pacientes";
    Layout = "~/Views/Shared/_Layout.cshtml"; }

<div class="container">
    @if (TempData["message"] != null)
    {
<div class="alert alert-warning alert-dismissible fade show " role="alert">
    @TempData["message"]
    <button type="button" class="close" date-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>}
    <div class="row">
        <div class="col-sm-6">
            <h3>Lista de Pacientes</h3>
        </div>
        <div class="col-sm-6">
            <a class="btn btn-success d-block" asp-action="Create" asp-controller="Pacientes">Agregar Paciente</a>
        </div>
    </div>
    <div class="row">

        @if (Model.listaPacientes.Count() > 0)
        {
<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <td>@Html.DisplayNameFor(m => m.listaPacientes.First().id)</td>
            <td>@Html.DisplayNameFor(m => m.listaPacientes.First().foto)</td>
            <td>@Html.DisplayNameFor(m => m.listaPacientes.First().nacimiento)</td>
            <td>@Html.DisplayNameFor(m => m.listaPacientes.First().nombre)</td>
            <td>@Html.DisplayNameFor(m => m.listaPacientes.First().apellido)</td>
            <td>@Html.DisplayNameFor(m => m.listaPacientes.First().telefono)</td>
            <td>@Html.DisplayNameFor(m => m.listaPacientes.First().asunto)</td>
            <td>@Html.DisplayNameFor(m => m.listaPacientes.First().fechaRegistro)</td>
            <td>@Html.DisplayNameFor(m => m.listaPacientes.First().ultimaActualizacion)</td>
            <td>Acciones</td>
        </tr>
    </thead>
    <tbody>

        @foreach (var item in Model.listaPacientes)
        {
        <tr>
            <td>@item.id</td>
            <td><img src='@Url.Action("GetImage", "Pacientes", new { item = item.id })' width="50" height="50" /></td>
            <td>@item.nacimiento</td>
            <td>@item.nombre</td>
            <td>@item.apellido</td>
            <td>@item.telefono</td>
            <td>@item.asunto</td>
            <td>@item.fechaRegistro</td>
            <td>@item.ultimaActualizacion</td>
            <td>
                <a asp-controller="Pacientes" asp-action="Edit" asp-route-id="@item.id" class="btn btn-warning">Editar</a>
                <a asp-controller="Pacientes" asp-action="Delete" asp-route-id="@item.id" class="btn btn-danger">Delete</a>
                <a asp-controller="Pacientes" asp-action="DetallesGenerales" asp-route-id="@item.id" class="btn btn-primary">Detalles</a>
                <a asp-controller="Pacientes" asp-action="PDF" asp-route-id="@item.id" class="btn btn-outline-info">Generar PDF</a>
            </td>

        </tr>}
    </tbody>
</table> }
        else
        { <p>No existen Registros.</p>}

    </div>
</div>


