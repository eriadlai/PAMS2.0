@model PAMS_2._0.Data.ViewModel;

@{
    ViewData["Title"] = "Users list";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Users List</h1>
<div class="container">
    @if (TempData["message"] != null)
    {
        <div class="alert alert-warning alert-dismissible fade show " role="alert">
            @TempData["message"]
            <button type="button" class="close" date-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    }
    <div class="row">
        
        <div class="col-sm-6">
            <a class="btn btn-success d-block" asp-action="Create" asp-controller="Usuario">Add User</a>
        </div>
    </div>
    <div class="row">

        @if (Model.listaUsuarios.Count() > 0)
        {
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <td>@Html.DisplayNameFor(m => m.listaUsuarios.First().id)</td>
                        <td>@Html.DisplayNameFor(m => m.listaUsuarios.First().foto)</td>
                        <td>@Html.DisplayNameFor(m => m.listaUsuarios.First().email)</td>
                        <td>@Html.DisplayNameFor(m => m.listaUsuarios.First().nacimiento)</td>
                        <td>@Html.DisplayNameFor(m => m.listaUsuarios.First().nombre)</td>
                        <td>@Html.DisplayNameFor(m => m.listaUsuarios.First().apellido)</td>
                        <td>@Html.DisplayNameFor(m => m.listaUsuarios.First().telefono)</td>
                        <td>@Html.DisplayNameFor(m => m.listaUsuarios.First().rol)</td>
                        <td>Acciones</td>
                    </tr>
                </thead>
                <tbody>

                    @foreach (var item in Model.listaUsuarios)
                    {
                    <tr>
                        <td>@item.id</td>
                        <td><img src='@Url.Action("GetImage", "Usuario", new {item=item.id })' width="50" height="50"/></td>
                        <td>@item.email</td>
                        <td>@item.nacimiento</td>
                        <td>@item.nombre</td>
                        <td>@item.apellido</td>
                        <td>@item.telefono</td>
                        <td>@item.rol</td>
                        <td>
                            <div class="dropdown">
                                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownUser" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        Options
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownUser">
                                        <a class="dropdown-item" asp-controller="Usuario" asp-action="Edit" asp-route-id="@item.id" class="btn btn-warning">Edit</a>
                                        <a class="dropdown-item" asp-controller="Usuario" asp-action="Delete" asp-route-id="@item.id" class="btn btn-danger">Delete</a>
                                        <a class="dropdown-item" asp-controller="Usuario" asp-action="EditPassword" asp-route-id="@item.id" class="btn btn-primary">Edit password</a>
                                    </div>
                            </div>
                                
                        </td>

                    </tr>
                    }
                </tbody>
            </table>
        }
        else
        { <p>No records exist.</p>}

    </div>
</div>

